#! /bin/bash
#
# please make certain the shell listed above exists and the ID trying
# to use it has a .rc with reasonable defaults
#
# This file is used to create the variables that are used by the other various shell scripts
#
# Within some shells is is necessary to echo settings to variables as shown for
# APIFQDN.  If execution issues are encountered, try updating all variables not set
# by commands currently to use this method.
#
########################
#### AUTHENTICATION ####
########################
# Script assumes username and password as sent as $1 and $2 CLI args
# or $1 arg for username with password read in at execution.
#
# To INSECURELY store credentials and hard code instead uncomment the following
# Replace <username> with your qualysguard username
#USERNAME=<username>

# Replace <password> with your qualysguard password
#PASSWORD=<password>
#echo $PASSWORD

# for debugging uncomment
#echo USERNAME = $USERNAME
#echo PASSWORD = $PASSWORD

######################
#### API HOSTNAME ####
######################
# Uncomment ONE APIFQDN according to your QualysGuard POD assignment
# Not working?	Check the FQDN for your POD in the current API Users Guide
#
# US POD1 API
APIFQDN=`echo qualysapi.qualys.com`
#
# US POD2 API
#APIFQDN=`echo qualysapi.qg2.apps.qualys.com`
#
# EU POD API
#APIFQDN=`echo qualysapi.qualys.eu`
#
# QualysGuard @Customer API
#APIFQDN=`echo qualysapi.<customer_base_url>`
# @Customer APIs must replace <customer_base_url> with domain name info
echo APIFQDN = $APIFQDN
#-------------------------------------------------------

############################
#### CURL CONFIGURATION ####
############################
# Explicitly specify CURL connection support parameters
#
# IMPORTANT!  if you HAVE NOT generated your own ca-bundle.crt using CURL
# documentation you ARE NOT using strong encryption and you CANNOT do so!
# SEE INSTALLATION_README.txt for more infomration
#
# CURL with default behaviors - weak encryption allowed and permit all SSL/TLS versions
# This is great for testing and REALLY BAD for production - you've been warned.
CURL=`echo curl`

##########################
### Keep-alive support ###
##########################
CURL=`echo curl --keepalive-time 20`

##############################################################
#### CURL CONFIGURATION - ENABLE STRONG ENCRYPTION HERE  #####
#### note:  keep-alive support also incldued as of 1/27/15 ###
##############################################################
# CURL with SSLv3 only, IPv4 only, a trusted root CA bundle, RC4-SHA or AES-256-SHA only
# Unomment below RECOMENDED, but NOT defaultD!!!
# CURL=`echo curl --keepalive-time 20 -3 -4 --cacert ca-bundle.crt --ciphers RC4-SHA,AES256-SHA`
#
############################################
#### CONTROL OUTPUT PATH BEHAVIOR HERE #####
############################################
# Do you want to OUTPUT to a subfolder under OUTPUTDIR that includes a date derived name
#
# Set to NO if you do want a date based subfolder
# You can set it to YES if you do
# However, it is used in an if-then-else. If NO, else evertyhing except NO.
#	  In other words unreconginzed and null answers are assumed to mean YES
#DATESTAMPIT="NO"
DATESTAMPIT="YES"

# What folder under the execution path would you like to use for output
OUTPUTDIR="./results"

#########################################
#### HOW FAR BACK SHOULD THE CALL GO ####
#########################################
#
# Useful if you downloaded results from last week and only want changes
#
# Set the following parameter to the date of the last run of the script in order to get a differential update of the hots
# Using the detection API, it will download all the vulnerabilities (according to the filters) for the hosts that changed
# since the last run/call
#
# For informtaional purposes, the detection api parameter is: vm_scan_since=yyyy-mm-dd[Thh-mm-ssZ]
# WARNING: For the first execution of the script, in order to do a full download, this variable MUST BE EMPTY
#
# An example of how to specify August 1st 2011
#LAST_CALL_DATE="&vm_scan_since=2011-08-01"
#
# Current LAST_CALL_DATE value
LAST_CALL_DATE=""
#
# For debugging information purposes
echo LAST_CALL_DATE = $LAST_CALL_DATE

###################################
### EXCLUSION TAG SUPPORT ADDED ###
###################################
EXCLUDETAG=`echo NOTSCANNEDWITHIN60DAYS`

############################################################
#### These variables do not need to be edited generally ####
############################################################
DATEPREFIX=`date '+%Y%m%d'`
echo OUTPUTDIR = $OUTPUTDIR
echo DATEPREFIX = $DATEPREFIX

